(()=>{"use strict";var e={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},t=document.querySelector(".cards"),r=document.querySelector(".profile"),n=r.querySelector(".user__name"),o=r.querySelector(".user__status"),a=document.querySelector(".add-card-button"),c=document.querySelector(".user__edit-button"),s=document.querySelector(".popup_type_profile"),u=document.forms.editProfile,i=editProfile.elements.userName,d=editProfile.elements.userStatus,l=document.querySelector(".popup_type_add-card"),p=document.forms.addCard,m=addCard.elements.cardTitle,f=addCard.elements.cardImage,v=document.querySelector(".popup_type_card"),y=v.querySelector(".popup__image"),_=v.querySelector(".popup__caption");var S,b,g,k=function(e,t,r,n){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(r),o.classList.remove(n),o.textContent=""},q=function(e,t,r,n){var o=e.querySelector(n);!function(e){return e.some((function(e){return!e.validity.valid}))}(t)?(o.disabled=!1,o.classList.remove(r)):(o.disabled=!0,o.classList.add(r))},L=function(e,t){var r=t.inputErrorClass,n=t.errorClass;Array.from(e.querySelectorAll(".form__input")).forEach((function(t){k(e,t,r,n)}))},C=function(e){e.target.classList.toggle("card__like-button_active")},E=function(e){e.target.closest(".card").remove()},h=function(e,t,r,n){var o=document.querySelector(e).content.cloneNode(!0),a=o.querySelector(".card__image"),c=o.querySelector(".card__title"),s=o.querySelector(".card__like-button"),u=o.querySelector(".card__delete-button");return a.src=r,a.alt=t,c.textContent=t,a.addEventListener("click",n),s.addEventListener("click",C),u.addEventListener("click",E),o},x=function(e,t){e.prepend(t)},j=function(e){e.classList.add("popup_opened"),e.addEventListener("mousedown",A),document.addEventListener("keydown",A)},O=function(e){e.classList.remove("popup_opened"),e.removeEventListener("mousedown",A),document.removeEventListener("keydown",A)},w=function(e){j(v),function(e,t,r){t.src=e.target.src,t.alt=e.target.alt,r.textContent=e.target.alt}(e,y,_)},A=function(e){e.target.classList.contains("popup__close-button")||e.target.classList.contains("popup")?O(e.target.closest(".popup")):"Escape"===e.key&&O(document.querySelector(".popup_opened"))},P=function(e){e.preventDefault(),O(s),n.textContent=i.value,o.textContent=d.value},B=function(e){e.preventDefault(),O(l),x(t,h(".card-template",m.value,f.value,w)),p.reset()};[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){x(t,h(".card-template",e.name,e.link,w))})),c.addEventListener("click",(function(){j(s),i.value=n.textContent,d.value=o.textContent,L(u,e),u.addEventListener("submit",P)})),a.addEventListener("click",(function(){j(l),L(p,e),p.addEventListener("submit",B),p.reset()})),b=(S=e).formSelector,g=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(S,["formSelector"]),Array.from(document.querySelectorAll(b)).forEach((function(e){!function(e,t){var r=t.inputSelector,n=t.submitButtonSelector,o=t.inactiveButtonClass,a=t.inputErrorClass,c=t.errorClass,s=Array.from(e.querySelectorAll(r));q(e,s,o,n),s.forEach((function(t){t.addEventListener("input",(function(){!function(e,t,r,n){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?k(e,t,r,n):function(e,t,r,n,o){var a=e.querySelector(".".concat(t.id,"-error"));t.classList.add(r),a.classList.add(n),a.textContent=o}(e,t,r,n,t.validationMessage)}(e,t,a,c),q(e,s,o,n)}))}))}(e,g)}))})();