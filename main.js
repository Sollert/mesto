(()=>{"use strict";var e={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},t=document.querySelector(".cards"),r=document.querySelector(".profile"),n=r.querySelector(".user__name"),o=r.querySelector(".user__status"),c=document.querySelector(".add-card-button"),a=document.querySelector(".user__edit-button"),s=document.querySelector(".popup_type_profile"),u=document.forms.editProfile,i=editProfile.elements.userName,l=editProfile.elements.userStatus,d=document.querySelector(".popup_type_add-card"),p=document.forms.addCard,m=addCard.elements.cardTitle,f=addCard.elements.cardImage,v=document.querySelector(".popup_type_card"),y=v.querySelector(".popup__image"),_=v.querySelector(".popup__caption");var S,b,g,k=function(e,t,r,n){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(r),o.classList.remove(n),o.textContent=""},q=function(e,t){e.disabled=!0,e.classList.add(t)},L=function(e,t,r,n){var o=e.querySelector(n);!function(e){return e.some((function(e){return!e.validity.valid}))}(t)?function(e,t){e.disabled=!1,e.classList.remove(t)}(o,r):q(o,r)},C=function(e,t){var r=t.submitButtonSelector,n=t.inputErrorClass,o=t.inactiveButtonClass,c=t.errorClass,a=Array.from(e.querySelectorAll(".form__input")),s=e.querySelector(r);a.forEach((function(t){k(e,t,n,c),q(s,o)}))},E=function(e){e.target.classList.toggle("card__like-button_active")},h=function(e){e.target.closest(".card").remove()},x=function(e,t,r,n,o){var c=document.querySelector(e).content.querySelector(t).cloneNode(!0),a=c.querySelector(".card__image"),s=c.querySelector(".card__title"),u=c.querySelector(".card__like-button"),i=c.querySelector(".card__delete-button");return a.src=n,a.alt=r,s.textContent=r,a.addEventListener("click",o),u.addEventListener("click",E),i.addEventListener("click",h),c},j=function(e,t){e.prepend(t)},O=function(e){e.classList.add("popup_opened"),e.addEventListener("mousedown",B),document.addEventListener("keydown",B)},w=function(e){e.classList.remove("popup_opened"),e.removeEventListener("mousedown",B),document.removeEventListener("keydown",B)},A=function(e){!function(e,t,r){t.src=e.target.src,t.alt=e.target.alt,r.textContent=e.target.alt}(e,y,_),O(v)},B=function(e){e.target.classList.contains("popup__close-button")||e.target.classList.contains("popup")?w(e.target.closest(".popup")):"Escape"===e.key&&w(document.querySelector(".popup_opened"))};[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){j(t,x(".card-template",".card",e.name,e.link,A))})),a.addEventListener("click",(function(){i.value=n.textContent,l.value=o.textContent,C(u,e),O(s)})),c.addEventListener("click",(function(){C(p,e),p.reset(),O(d)})),p.addEventListener("submit",(function(e){e.preventDefault(),w(d),j(t,x(".card-template",".card",m.value,f.value,A)),p.reset()})),u.addEventListener("submit",(function(e){e.preventDefault(),w(s),n.textContent=i.value,o.textContent=l.value})),b=(S=e).formSelector,g=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(S,["formSelector"]),Array.from(document.querySelectorAll(b)).forEach((function(e){!function(e,t){var r=t.inputSelector,n=t.submitButtonSelector,o=t.inactiveButtonClass,c=t.inputErrorClass,a=t.errorClass,s=Array.from(e.querySelectorAll(r));L(e,s,o,n),s.forEach((function(t){t.addEventListener("input",(function(){!function(e,t,r,n){t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),t.validity.valid?k(e,t,r,n):function(e,t,r,n,o){var c=e.querySelector(".".concat(t.id,"-error"));t.classList.add(r),c.classList.add(n),c.textContent=o}(e,t,r,n,t.validationMessage)}(e,t,c,a),L(e,s,o,n)}))}))}(e,g)}))})();